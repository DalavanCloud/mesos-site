<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Apache Mesos: attributes-resources</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Mesos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">attributes-resources </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
 <h2>layout: documentation </h2>
<h1>Mesos Attributes &amp; Resources</h1>
<p>The Mesos system has two basic methods to describe the slaves that comprise a cluster. One of these is managed by the Mesos master, the other is simply passed onwards to the frameworks using the cluster.</p>
<h2>Types</h2>
<p>The types of values that are supported by Attributes and Resources in Mesos are scalar, ranges, sets and text.</p>
<p>The following are the definitions of these types: </p><pre class="fragment">scalar : floatValue

floatValue : ( intValue ( "." intValue )? ) | ...

intValue : [0-9]+

range : "[" rangeValue ( "," rangeValue )* "]"

rangeValue : scalar "-" scalar

set : "{" text ( "," text )* "}"

text : [a-zA-Z0-9_/.-]
</pre><h2>Attributes</h2>
<p>Attributes are key-value pairs (where value is optional) that Mesos passes along when it sends offers to frameworks. An attribute value supports 3 different <em>types</em>: scalar, range or text. </p><pre class="fragment">attributes : attribute ( ";" attribute )*

attribute : text ":" ( scalar | range | text )
</pre><h2>Resources</h2>
<p>The Mesos system can manage 3 different <em>types</em> of resources: scalars, ranges, and sets. These are used to represent the different resources that a Mesos slave has to offer. For example, a scalar resource type could be used to represent the amount of memory on a slave. Resources can be specified either with a <a class="el" href="namespaceJSON.html">JSON</a> array or a semicolon-delimited string of key:value pairs. If, after examining the examples below, you have questions about the format of the <a class="el" href="namespaceJSON.html">JSON</a>, inspect the <code>Resource</code> protobuf message definition in <code>include/mesos/mesos.proto</code>.</p>
<p>As <a class="el" href="namespaceJSON.html">JSON</a>: </p><pre class="fragment">[
  {
    "name": "&lt;resource_name&gt;",
    "type": "SCALAR",
    "scalar": {
      "value": &lt;resource_value&gt;
    }
  },
  {
    "name": "&lt;resource_name&gt;",
    "type": "RANGES",
    "ranges": {
      "range": [
        {
          "begin": &lt;range_beginning&gt;,
          "end": &lt;range_ending&gt;
        },
        ...
      ]
    }
  },
  {
    "name": "&lt;resource_name&gt;",
    "type": "SET",
    "set": {
      "item": [
        "&lt;first_item&gt;",
        ...
      ]
    },
    "role": "&lt;role_name&gt;"
  },
  ...
]
</pre><p>As a list of key:value pairs: </p><pre class="fragment">resources : resource ( ";" resource )*

resource : key ":" ( scalar | range | set )

key : text ( "(" resourceRole ")" )?

resourceRole : text | "*"
</pre><p>Note that <code>resourceRole</code> must be a valid role name; see the <a class="el" href="roles_8md.html">roles</a> documentation for details.</p>
<h2>Predefined Uses &amp; Conventions</h2>
<p>The Mesos master has a few resources that it pre-defines in how it handles them. At the current time, this list consist of:</p>
<ul>
<li><code>cpus</code></li>
<li><code>mem</code></li>
<li><code>disk</code></li>
<li><code>ports</code></li>
</ul>
<p>In particular, a slave without <code>cpus</code> and <code>mem</code> resources will never have its resources advertised to any frameworks. Also, the Master's user interface interprets the scalars in <code>mem</code> and <code>disk</code> in terms of *<code>MB</code>*. IE: the value <code>15000</code> is displayed as <code>14.65GB</code>.</p>
<h2>Examples</h2>
<p>Here are some examples for configuring the Mesos slaves. </p><pre class="fragment">--resources='cpus:24;mem:24576;disk:409600;ports:[21000-24000,30000-34000];bugs(debug_role):{a,b,c}'

--resources='[{"name":"cpus","type":"SCALAR","scalar":{"value":24}},{"name":"mem","type":"SCALAR","scalar":{"value":24576}},{"name":"disk","type":"SCALAR","scalar":{"value":409600}},{"name":"ports","type":"RANGES","ranges":{"range":[{"begin":21000,"end":24000},{"begin":30000,"end":34000}]}},{"name":"bugs","type":"SET","set":{"item":["a","b","c"]},"role":"debug_role"}]'

--attributes='rack:abc;zone:west;os:centos5;level:10;keys:[1000-1500]'
</pre><p>Or given a file <code>resources.txt</code> containing the following: </p><pre class="fragment">[
  {
    "name": "cpus",
    "type": "SCALAR",
    "scalar": {
      "value": 24
    }
  },
  {
    "name": "mem",
    "type": "SCALAR",
    "scalar": {
      "value": 24576
    }
  },
  {
    "name": "disk",
    "type": "SCALAR",
    "scalar": {
      "value": 409600
    }
  },
  {
    "name": "ports",
    "type": "RANGES",
    "ranges": {
      "range": [
        {
          "begin": 21000,
          "end": 24000
        },
        {
          "begin": 30000,
          "end": 34000
        }
      ]
    }
  },
  {
    "name": "bugs",
    "type": "SET",
    "set": {
      "item": [
        "a",
        "b",
        "c"
      ]
    },
    "role": "debug_role"
  }
]
</pre><p>You can do: </p><pre class="fragment">$ path/to/mesos-slave --resources=file:///path/to/resources.txt ...
</pre><p>In this case, we have five resources of three different types: scalars, a range, and a set. There are scalars called <code>cpus</code>, <code>mem</code> and <code>disk</code>, a range called <code>ports</code>, and a set called <code>bugs</code>. <code>bugs</code> is assigned to the role <code>debug_role</code>, while the other resources do not specify a role and are thus assigned to the default role.</p>
<p>Note: the "default role" can be set by the <code>--default_role</code> flag.</p>
<ul>
<li>scalar called <code>cpus</code>, with the value <code>24</code></li>
<li>scalar called <code>mem</code>, with the value <code>24576</code></li>
<li>scalar called <code>disk</code>, with the value <code>409600</code></li>
<li>range called <code>ports</code>, with values <code>21000</code> through <code>24000</code> and <code>30000</code> through <code>34000</code> (inclusive)</li>
<li>set called <code>bugs</code>, with the values <code>a</code>, <code>b</code> and <code>c</code>, assigned to the role <code>debug_role</code></li>
</ul>
<p>In the case of attributes, we end up with five attributes:</p>
<ul>
<li><code>rack</code> with text value <code>abc</code></li>
<li><code>zone</code> with text value <code>west</code></li>
<li><code>os</code> with text value <code>centos5</code></li>
<li><code>level</code> with scalar value 10</li>
<li><code>keys</code> with range value <code>1000</code> through <code>1500</code> (inclusive) </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>

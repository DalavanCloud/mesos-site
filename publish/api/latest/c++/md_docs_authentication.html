<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Apache Mesos: authentication</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Mesos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">authentication </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
 <h2>layout: documentation </h2>
<h1>Authentication</h1>
<p>Mesos 0.15.0 added support for framework authentication, and 0.19.0 added slave authentication. Authentication permits only trusted entities to interact with the Mesos cluster.</p>
<p>Authentication is used by Mesos in three ways:</p>
<ol type="1">
<li>Require that frameworks must be authenticated in order to register with the master.</li>
<li>Require that slaves must be authenticated in order to offer resources to the master.</li>
<li>To restrict access to the /teardown endpoint.</li>
</ol>
<h2>How Does It Work?</h2>
<p>Mesos uses the <a href="http://asg.web.cmu.edu/sasl/">Cyrus SASL library</a> to implement authentication. SASL is a very flexible authentication framework that allows two endpoints to authenticate with each other and also has support for various authentication mechanisms (ANONYMOUS, PLAIN, CRAM-MD5, GSSAPI etc). Currently, Mesos provides support for CRAM-MD5 authentication, but users can provide their own authentication modules. CRAM-MD5 makes use of a <b>principal</b> and <b>secret</b> pair, with the principal representing the framework's identity. Note that this is different from the framework <em>user</em>, which is the account used by the executor to run tasks, and the <em>role</em> which is used to determine what resources frameworks can use.</p>
<h2>Configuration</h2>
<p>The <a class="el" href="configuration_8md.html">configuration options</a> that are used by the authentication mechanism are as follows:</p>
<h3>Masters</h3>
<ul>
<li>&ndash;[no-]authenticate - If authenticate is 'true' only authenticated frameworks are allowed to register. If 'false' unauthenticated frameworks are also allowed to register.</li>
<li>&ndash;[no-]authenticate_slaves - If 'true' only authenticated slaves are allowed to register. If 'false' unauthenticated slaves are also allowed to register.</li>
<li>&ndash;authenticators - Specifies which authenticator module to use. The default is crammd5, but additional modules can be added with the &ndash;modules option.</li>
<li>&ndash;credentials - The path to the text file which contains a list (either plain text or <a class="el" href="namespaceJSON.html">JSON</a>) of accepted credentials. This may be optional depending on the authenticator being used. However, if specified, the credentials will be valid for the /teardown endpoint regardless of which authenticator is used.</li>
</ul>
<h3>Slaves</h3>
<ul>
<li>&ndash;authenticatee - Analog to the master &ndash;authenticators option to specify what module to use. Defaults to crammd5.</li>
<li>&ndash;credential - Just like the master &ndash;credentials option, except only one credential is allowed, since this credential is used to identify the slave to the master.</li>
</ul>
<h2>CRAM-MD5 Example</h2>
<ol type="1">
<li>First, create a credentials file for the masters, the contents of which should look like this: <pre class="fragment"> principal1 secret1
 principal2 secret2
</pre></li>
<li>Now, start the master process using your credentials file (assuming the file is ~/credentials): <pre class="fragment"> ./bin/mesos-master.sh --ip=127.0.0.1 --work_dir=/var/lib/mesos --authenticate --authenticate_slaves --credentials=~/credentials
</pre></li>
<li>Now create another file with a single credential in it (~/slave_credential): <pre class="fragment"> principal1 secret1
</pre></li>
<li>That file will be used to identify the slave process. Start the slave: <pre class="fragment">./bin/mesos-slave.sh --master=127.0.0.1:5050 --credential=~/slave_credential
</pre></li>
<li>Your new slave should have now successfully authenticated with the master. With these settings, any framework that you'd like to use must also authenticate against the Mesos master. The method of configuring framework authentication may vary by framework, but is simple to implement as the scheduler driver will handle authentication when a Credential object is passed to its constructor. You can test out framework authentication using the test framework provided with Mesos as follows: <pre class="fragment">MESOS_AUTHENTICATE=true DEFAULT_PRINCIPAL=principal2 DEFAULT_SECRET=secret2 ./src/test-framework --master=127.0.0.1:5050</pre> </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>

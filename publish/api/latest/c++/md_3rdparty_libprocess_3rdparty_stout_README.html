<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>mesos: User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mesos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Stout is a header-only C++ library. Simply add the <code>include</code> folder to your include path (i.e., <code>-I/path/to/stout/include</code>) during compilation (eventually we plan to support installation).</p>
<blockquote class="doxtable">
<p>NOTE: Depending on which headers you'd like to use, you may require the following third party libraries:</p>
<ul>
<li>Boost</li>
<li>Google's glog (this dependency will be removed in the future)</li>
<li>Google's protobuf (version 2.5.0 is required to run tests)</li>
<li>Google's gmock/gtest </li>
</ul>
</blockquote>
<p>There are a handful of data structures provided within the library (including some collections), as well as some namespaced and miscellaneous utilities. Also included are abstractions for <a href="#flags">command line flags</a>.</p>
<p>Stout provides and heavily leverages some monadic structures including <a href="#option">Option</a> and <a href="#try">Try</a>.</p>
<p>Note that the library is designed to completely avoid exceptions. See <a href="#exceptions">exceptions</a> for further discussion.</p>
<ul>
<li><a href="#option">Option, Some, and None</a></li>
<li><a href="#try">Try, Result, and Error</a></li>
<li><a href="#nothing">Nothing</a></li>
<li><a href="#fs">fs::</a></li>
<li><a href="#gzip">gzip::</a></li>
<li><a href="#json">JSON::</a></li>
<li><a href="#lambda">lambda::</a></li>
<li><a href="#memory">memory::</a></li>
<li><a href="#net">net::</a></li>
<li><a href="#os">os::</a></li>
<li><a href="#path">path::</a></li>
<li><a href="#proc">proc::</a></li>
<li><a href="#protobuf">protobuf::</a></li>
<li><a href="#strings">strings::</a></li>
<li><a href="#flags">Command Line Flags</a></li>
<li><a href="#collections">Collections</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#philosophy">Philosophy</a></li>
</ul>
<p><a href="option"></a></p>
<h2><code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code>, <code>Some</code>, and <code><a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None</a></code></h2>
<p>The <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code> type provides a safe alternative to using <code>NULL</code>. An <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code> can be constructed explicitely or implicitely:</p>
<p>``` <a class="el" href="classOption.html">Option&lt;bool&gt;</a> o(true); <a class="el" href="classOption.html">Option&lt;bool&gt;</a> o = true; ```</p>
<p>You can check if a value is present using <code>Option::isSome()</code> and <code>Option::isNone()</code> and retrieve the value using <code>Option::get()</code>:</p>
<p>``` if (!o.isNone()) { ... o.get() ... } ```</p>
<p>Note that the current implementation <em>copies</em> the underlying values (see <a href="#philosophy">Philosophy</a> for more discussion). <a class="el" href="structNothing.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Nothing</a> prevents you from using pointers, however, <em>the pointer will not be deleted when the <a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a> is destructed</em>:</p>
<p>``` Option&lt;std::string*&gt; o = new std::string("hello world"); ```</p>
<p>The <code><a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None</a></code> type acts as "syntactic sugar" to make using <a href="#option">Option</a> less verbose. For example:</p>
<p>``` Option&lt;T&gt; foo(const Option&lt;T&gt;&amp; o) { return <a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None()</a>; // Can use '<a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None</a>' here. }</p>
<p>...</p>
<p>foo(None()); // Or here.</p>
<p>...</p>
<p><a class="el" href="classOption.html">Option&lt;int&gt;</a> o = <a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None()</a>; // Or here. ```</p>
<p>Similar to <code><a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None</a></code>, the <code>Some</code> type can be used to construct an <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code> as well. In most circumstances <code>Some</code> is unnecessary due to the implicit <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code> constructor, however, it can still be useful to remove any ambiguities as well as when embedded within collections:</p>
<p>``` <a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a>&lt;<a class="el" href="classOption.html">Option&lt;std::string&gt;</a>&gt; o = Some("42");</p>
<p>std::map&lt;std::string, <a class="el" href="classOption.html">Option&lt;std::string&gt;</a>&gt; values; values["value1"] = <a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None()</a>; values["value2"] = Some("42"); ```</p>
<p><a href="try"></a></p>
<h2><code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code>, <code><a class="el" href="classResult.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Result</a></code>, and <code><a class="el" href="classError.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Error</a></code></h2>
<p>A <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code> provides a mechanism to return a value or an error without throwing exceptions. Like <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code>, you can explicitely or implicitely construct a <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code>:</p>
<p>``` Try&lt;bool&gt; t(true); Try&lt;bool&gt; t = true; ```</p>
<p>You can check if a value is present using <code>Try::isSome()</code> and <code>Try::isError()</code> and retrieve the value using <code>Try::get()</code> or the error via <code>Try::error</code>:</p>
<p>``` if (!t.isError()) { ... t.get() ... } else { ... t.error() ... } ```</p>
<p>A <code><a class="el" href="classResult.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Result</a></code> is a combination of a <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code> and an <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code>; you can think of a <code><a class="el" href="classResult.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Result</a></code> as semantically being equivalant to <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a>&lt;<a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a>&lt;T&gt;&gt;</code>. In addition to <code>isSome()</code> and <code>isError()</code> a <code><a class="el" href="classResult.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Result</a></code> includes <code>isNone()</code>.</p>
<p>The <code><a class="el" href="classError.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Error</a></code> type acts as "syntactic sugar" for implicitly constructing a <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code> or <code><a class="el" href="classResult.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Result</a></code>. For example:</p>
<p>``` Try&lt;bool&gt; parse(const std::string&amp; s) { if (s == "true") return true; else if (s == "false") return false; else return <a class="el" href="classError.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Error</a>("Failed to parse string as boolean"); }</p>
<p>Try&lt;bool&gt; t = parse("false"); ```</p>
<p>You can also use <code><a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None</a></code> and <code>Some</code> with <code><a class="el" href="classResult.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Result</a></code> just like with <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code>:</p>
<p>``` Result&lt;bool&gt; r = <a class="el" href="structNone.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">None()</a>; Result&lt;bool&gt; r = Some(true); ```</p>
<p><a href="nothing"></a></p>
<h2><code><a class="el" href="structNothing.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Nothing</a></code></h2>
<p>A lot of functions that return <code>void</code> can also "return" an error. Since we don't use exceptions (see <a href="#exceptions">Exceptions</a>) we capture this pattern using <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a>&lt;<a class="el" href="structNothing.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Nothing</a>&gt;</code> (see <a href="#try">Try</a>).</p>
<p><a href="fs"></a></p>
<h2><code>fs::</code></h2>
<p>A collection of utilities for working with a filesystem. Currently we provide <code>fs::size</code>, <code>fs::usage</code>, and <code>fs::symlink</code>.</p>
<p><a href="gzip"></a></p>
<h2><code>gzip::</code></h2>
<p>A collection of utilities for doing gzip compression and decompression using <code>gzip::compress</code> and <code>gzip::decompress</code>.</p>
<p>``` gzip::decompress(gzip::compress("hello world")); ```</p>
<p><a href="json"></a></p>
<h2><code><a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a>::</code></h2>
<p><em>Requires Boost.</em></p>
<p>Provides structures and rendering of the JavaScript Object Notation (<a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a>) grammar using <code>boost::variant</code>. A <a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a> "value" (<code><a class="el" href="structJSON_1_1Value.html">JSON::Value</a></code>) is one of (i.e., a variant of) <code><a class="el" href="structJSON_1_1String.html">JSON::String</a></code>, <code><a class="el" href="structJSON_1_1Number.html">JSON::Number</a></code>, <code><a class="el" href="structJSON_1_1Object.html">JSON::Object</a></code>, <code><a class="el" href="structJSON_1_1Array.html">JSON::Array</a></code>, <code><a class="el" href="structJSON_1_1True.html">JSON::True</a></code>, <code><a class="el" href="structJSON_1_1False.html">JSON::False</a></code>, and <code><a class="el" href="structJSON_1_1Null.html">JSON::Null</a></code>.</p>
<p>We explicitly define 'true' (<code><a class="el" href="structJSON_1_1True.html">JSON::True</a></code>), 'false' (<code><a class="el" href="structJSON_1_1False.html">JSON::False</a></code>), and 'null' (<code><a class="el" href="structJSON_1_1Null.html">JSON::Null</a></code>), for clarity and also because <code>boost::variant</code> "picks" the wrong type when we try and use <code>std::string</code>, <code>long</code> (or <code>int</code>), <code>double</code> (or <code>float</code>), and <code>bool</code> all in the same variant.</p>
<p>We could have avoided using <code><a class="el" href="structJSON_1_1String.html">JSON::String</a></code> or <code><a class="el" href="structJSON_1_1Number.html">JSON::Number</a></code> and just used <code>std::string</code> and <code>double</code> respectively, but we choose to include them for completeness (although, this does slow compilation due to the extra template instantiations). That being said, you can use the native types in place of constructing the <code><a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a></code> wrapper. For example:</p>
<p>``` // { // "foo": "value1", // "bar": "value2", // "baz": 42.0, // "bam": 0.42, // } <a class="el" href="structJSON_1_1Object.html">JSON::Object</a> object; object.values["foo"] = <a class="el" href="structJSON_1_1String.html">JSON::String</a>("value1"); object.values["bar"] = "value2"; object.values["baz"] = <a class="el" href="structJSON_1_1Number.html">JSON::Number</a>(42.0); object.values["bam"] = 0.42; ```</p>
<p>Of course, nesting of a <code><a class="el" href="structJSON_1_1Value.html">JSON::Value</a></code> is also permitted as per the <a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a> specification:</p>
<p>``` // An array of objects: // [ // { "first": "Benjamin", "last": "Hindman" }, // { "first": "Michael", "last": "Hindman" } // ] <a class="el" href="structJSON_1_1Array.html">JSON::Array</a> array;</p>
<p><a class="el" href="structJSON_1_1Object.html">JSON::Object</a> object1; object1.values["first"] = "Benjamin"; object1.values["last"] = "Hindman";</p>
<p>array.values.push_back(object1);</p>
<p><a class="el" href="structJSON_1_1Object.html">JSON::Object</a> object2; object2.values["first"] = "Michael"; object2.values["last"] = "Hindman";</p>
<p>array.values.push_back(object2); ```</p>
<p>You can "render" a <a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a> value using <code>std::ostream operator &lt;&lt;</code> (or by using <code>stringify</code> (see <a href="#stringify">here</a>).</p>
<p><a href="lambda"></a></p>
<h2><code>lambda::</code></h2>
<p>To help deal with compatibility issues between C++98/03 and C++11 we wrap some of the TR1 types from <code>functional</code> in <code>lambda</code>. That way, when using <code>lambda::bind</code> you'll get <code>std::tr1::bind</code> where TR1 is available and <code>std::bind</code> when C++11 is available.</p>
<p><a href="memory"></a></p>
<h2><code>memory::</code></h2>
<p>Similiar to <code>lambda</code>, we provide a <code>memory</code> namespace to help deal with compatibility issues between C++98/03 and C++11 that wraps some of the TR1 types from <code>memory</code>.</p>
<p><a href="net"></a></p>
<h2><code>net::</code></h2>
<p>A collection of utilities for working with the networking subsystem. Currently we provide <code>net::download</code> and <code>net::getHostname</code>.</p>
<p><a href="os"></a></p>
<h2><code>os::</code></h2>
<p>The <code>os</code> namespace provides numerous utilities for working with the operating system. Most of these utilities are simple wrappers around C-style functions that don't cleanly take or return C++ types, for example <code>os::getenv</code>, <code>os::setenv</code>, <code>os::basename</code>, <code>os::dirname</code>, <code>os::realpath</code>, etc. The library also includes a handful of "shell familiars", such as <code>os::chown</code>, <code>os::touch</code>, <code>os::ls</code>, <code>os::find</code>, <code>os::su</code>, <code>os::glob</code>, etc. We call out a few of the special abstractions below.</p>
<h4>Reading and Writing <code>std::string</code></h4>
<p>To make reading and writing from files easier there are implementations of <code>os::read</code> and <code>os::write</code> that take and return <code>std::string</code>.</p>
<h4>Files</h4>
<p>Most of the ways to get or set information about files requires complicated calls using the <code>stat</code> family of functions. We provide simple wrappers around <code>stat</code> via things like <code>os::exists</code>, <code>os::isdir</code>, <code>os::isfile</code>, and <code>os::islink</code>.</p>
<h4>Processes</h4>
<p>There are some fairly extensive abstractions around getting process information from the operating system. There is an <code><a class="el" href="structos_1_1Process.html">os::Process</a></code> type that gets provided by utiltiies like <code>os::processes</code>. You can construct an arbitrary fork/exec process tree by constructing an <code><a class="el" href="structos_1_1Fork.html">os::Fork</a></code>, get all the processes in a process tree using <code>os::pstree</code>, and kill all the processes in a process tree using <code>os::killtree</code> (the latter is similar to the shell command <code>kill</code> but strictly more powerful in that it can walk a process tree, following groups and sessions if requested).</p>
<h4><code>sysctl</code></h4>
<p>There is an <code><a class="el" href="structos_1_1sysctl.html">os::sysctl</a></code> abstraction for getting and setting kernel state on OS X.</p>
<h4>Signals</h4>
<p>There are a handful of wrappers that make working with signals easier, including <code>os::pending</code>, <code>os::block</code>, and <code>os::unblock</code>. In addition, there is a suppression abstraction that enables executing a block a code while blocking a signal. Consider writing to a pipe which may raise a SIGPIPE if the pipe has been closed. Using <code>suppress</code> you can do:</p>
<p>``` suppress (SIGPIPE) { write(fd, data, size); if (errno == EPIPE) { // The pipe has been closed! } } ```</p>
<p><a href="path"></a></p>
<h2><code>path::</code></h2>
<p>The <code>path</code> namespace provides the <code>path::join</code> function for joining toghether filesystem paths.</p>
<p><a href="proc"></a></p>
<h2><code>proc::</code></h2>
<p><em>Requires Linux.</em></p>
<p>The <code>proc</code> namespace provides some abstractions for working with the Linux <code>proc</code> filesystem. The key abstractions are <code><a class="el" href="structproc_1_1ProcessStatus.html">proc::ProcessStatus</a></code> which models the data provided in <code>/proc/[pid]/stat</code> and <code><a class="el" href="structproc_1_1SystemStatus.html">proc::SystemStatus</a></code> which models the data provided in <code>/proc/stat</code>.</p>
<p><a href="protobuf"></a></p>
<h2><code>protobuf::</code></h2>
<p><em>Requires protobuf.</em></p>
<p>Helpers for reading and writing protobufs from files and file descriptors are provided via <code>protobuf::read</code> and <code>protobuf::write</code>. These assume a "recordio" format where the length of the serialized data is read/written first followed by the actual data.</p>
<p>There is also a protobuf to <a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a> converter via <code><a class="el" href="structJSON_1_1Protobuf.html">JSON::Protobuf</a></code> that enables serializing a protobuf into <a class="el" href="namespaceJSON.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">JSON</a>:</p>
<p>``` google::protobuf::Message message; ... fill in message ... <a class="el" href="structJSON_1_1Object.html">JSON::Object</a> o = <a class="el" href="structJSON_1_1Protobuf.html">JSON::Protobuf(message)</a>; ```</p>
<p><a href="strings"></a></p>
<h2><code>strings::</code></h2>
<p>Utilities for inspecting and manipulating strings are available in the <code>strings</code> namespace. This includes varying tokenization techniques via <code>strings::tokenize</code>, <code>strings::split</code>, and <code>strings::pairs</code>.</p>
<p>String formatting is provided via <code>strings::format</code>. The <code>strings::format</code> functions produces strings based on the <code>printf</code> family of functions. Except, unlike the <code>printf</code> family of functions, the <code>strings::format</code> routines attempt to "stringify" (see <a href="#stringify">here</a>) any arguments that are not POD types (i.e., "plain old data": primitives, pointers, certain structs/classes and unions, etc). This enables passing structs/classes to <code>strings::format</code> provided there is a definition/specialization of <code>std::ostream operator &lt;&lt;</code> available for that type. Note that the <code>s</code> format specifier is expected for each argument that gets passed. A specialization for <code>std::string</code> is also provided so that <code>std::string::c_str</code> is not necessary (but again, <code>s</code> is expected as the format specifier).</p>
<p><a href="flags"></a></p>
<h2>Command Line <a class="el" href="classFlags.html">Flags</a></h2>
<p>One frustration with existing command line flags libraries was the burden they put on writing tests that attempted to have many different instantiations of the flags. For example, running two instances of the same component within a test where each instance was started with different command line flags. To solve this, we provide a command line flags abstraction called <code><a class="el" href="classFlags.html">Flags</a></code> (in the <code>flags</code> namespace) that you can extend to define your own flags:</p>
<p>``` struct MyFlags : <a class="el" href="classflags_1_1Flags.html">flags::Flags</a> { MyFlags() { // A flag with a default value. add(&amp;MyFlags::foo, "foo", "Some information about foo", DEFAULT_VALUE_FOR_FOO);</p>
<p>// A flag with out a default value, // defined below with an <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code>. add(&amp;MyFlags::bar, "bar", "Some information about bar"); }</p>
<p>int foo; <a class="el" href="classOption.html">Option&lt;std::string&gt;</a> bar; }; ```</p>
<p>You can then load the flags via <code>argc</code> and <code>argv</code> via:</p>
<p>``` MyFlags flags; Try&lt;Nothing&gt; load = flags.load(None(), argc, argv);</p>
<p>if (load.isError()) { ... }</p>
<p>... flags.foo ... ... flags.bar.isSome() ... flags.bar.get() ... ```</p>
<p>You can load flags from the environment in addition to <code>argc</code> and <code>argv</code> by specifying a prefix to use when looking for flags:</p>
<p>``` MyFlags flags; Try&lt;Nothing&gt; load = flags.load("PREFIX_", argc, argv); ```</p>
<p>Then both PREFIX_foo and PREFIX_bar will be loaded from the environemnt as well as possibly from on the command line.</p>
<p>There are various ways to deal with unknown flags (i.e., <code>--baz</code> in our example above) and duplicates (i.e., <code>--foo</code> on the command line twice or once in the environment and once on the command line). See the header files for the various <code>load</code> overloads.</p>
<p><a href="collections"></a></p>
<h2>Collections</h2>
<p>Many of the collections and containers provided either by Boost or the C++ standard are cumbersome to use or yield brittle, hard to maintain code. For many of the standard data structures we provide wrappers with modified interfaces often simplified or enhanced using types like <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code> and <code><a class="el" href="classOption.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Option</a></code>.</p>
<blockquote class="doxtable">
<p>NOTE: The collections are not namespaced. </p>
</blockquote>
<p>Some of these wrappers use the Boost implementations of these data structures, including: <code>hashmap</code>, <code>hashset</code>, <code>linkedhashmap</code>, <code>multihashmap</code>, <code>multimap</code>.</p>
<p>There is a <code><a class="el" href="classSet.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Set</a></code> abstraction for working with a <code>std::set</code> as well as some overloaded operators for doing set union (<code>|</code>), set intersection (<code>&amp;</code>), and set appending (<code>+</code>).</p>
<p>Finally, there is a <code>cache</code> implementation (also requires Boost) that provides a templated implementation of a least-recently used (LRU) cache. Note that the key type must be compatible with <code>boost::unordered_map</code>.</p>
<p><a href="miscellaneous"></a></p>
<h2>Miscellaneous</h2>
<p>There are a handful of types and utilties that fall into the miscellaneous category. Note that like the collections <em>these are not namespaced</em>.</p>
<h4><code><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a></code></h4>
<p>Used to represent some magnitude of bytes, i.e., kilobytes, megabytes, gigabytes, etc. The main way to construct a <code><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a></code> is to invoke <code>Bytes::parse</code> which expects a string made up of a number and a unit, i.e., <code>42B</code>, <code>42MB</code>, <code>42GB</code>, <code>42TB</code>. For each of the supported units there are associated types: <code><a class="el" href="classMegabytes.html">Megabytes</a></code>, <code><a class="el" href="classGigabytes.html">Gigabytes</a></code>, <code><a class="el" href="classTerabytes.html">Terabytes</a></code>. Each of these types inherit from <code><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a></code> and can be used anywhere a <code><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a></code> is expected, for example:</p>
<p>``` Try&lt;Bytes&gt; bytes = Bytes::parse("32MB");</p>
<p><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a> bytes = <a class="el" href="classMegabytes.html">Megabytes(10)</a>; ```</p>
<p>There are operators for comparing (equal to, greater than or less than, etc) and manipulating (addition, subtraction, etc) <code><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a></code> objects, as well as a <code>std::ostream operator &lt;&lt;</code> overload (thus making them stringifiable, see <a href="#stringify">here</a>). For example:</p>
<p>``` Try&lt;Bytes&gt; bytes = Bytes::parse("32MB");</p>
<p><a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a> tengb = <a class="el" href="classGigabytes.html">Gigabytes(10)</a>; <a class="el" href="classBytes.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Bytes</a> onegb = <a class="el" href="classMegabytes.html">Megabytes(1024)</a>;</p>
<p>stringify(tengb + onegb); // Yields "11GB". ```</p>
<h4><code><a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a></code></h4>
<p>Used to represent some duration of time. The main way to construct a <code><a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a></code> is to invoke <code>Duration::parse</code> which expects a string made up of a number and a unit, i.e., <code>42ns</code>, <code>42us</code>, <code>42ms</code>, <code>42secs</code>, <code>42mins</code>, <code>42hrs</code>, <code>42days</code>, <code>42weeks</code>. For each of the supported units there are associated types: <code><a class="el" href="classNanoseconds.html">Nanoseconds</a></code>, <code><a class="el" href="classMicroseconds.html">Microseconds</a></code>, <code><a class="el" href="classMilliseconds.html">Milliseconds</a></code>, <code><a class="el" href="classSeconds.html">Seconds</a></code>, <code><a class="el" href="classMinutes.html">Minutes</a></code>, <code><a class="el" href="classHours.html">Hours</a></code>, <code><a class="el" href="classDays.html">Days</a></code>, <code><a class="el" href="classWeeks.html">Weeks</a></code>. Each of these types inherit from <code><a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a></code> and can be used anywhere a <code><a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a></code> is expected, for example:</p>
<p>``` <a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a> d = <a class="el" href="classSeconds.html">Seconds(5)</a>; ```</p>
<p>There are operators for comparing (equal to, greater than or less than, etc) and manipulating (addition, subtraction, etc) <code><a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a></code> objects, as well as a <code>std::ostream operator &lt;&lt;</code> overload (thus making them stringifiable, see <a href="#stringify">here</a>). Note that the <code>std::ostream operator &lt;&lt;</code> overload formats the output (including the unit) based on the magnitude, for example:</p>
<p>``` stringify(Seconds(42)); // Yields "42secs". stringify(Seconds(120)); // Yields "2mins". ```</p>
<h4><code><a class="el" href="classStopwatch.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Stopwatch</a></code></h4>
<p>A datastructure for recording elapsed time (according to the underlying operating system clock):</p>
<p>``` <a class="el" href="classStopwatch.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Stopwatch</a> stopwatch; stopwatch.start();</p>
<p><a class="el" href="classDuration.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Duration</a> elapsed = stopwatch.elapsed();</p>
<p>stopwatch.stop();</p>
<p>assert(elapsed &lt;= stopwatch.elapsed()); ```</p>
<h4><code><a class="el" href="structUUID.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">UUID</a></code></h4>
<p><em>Requires Boost.</em></p>
<p>A wrapper around <code>boost::uuid</code> with a simpler interface.</p>
<h4><code>EXIT</code></h4>
<p>A macro for exiting an application without generating a signal (such as from <code>assert</code>) or a stack trace (such as from Google logging's <code>CHECK</code> family of macros). This is useful if you want to exit the program with an error message:</p>
<p>``` EXIT(42) &lt;&lt; "You've provided us bad input ..."; ```</p>
<p>Note that a newline is automatically appended and the processes exit status is set to 42.</p>
<h4><code>foreach</code></h4>
<p><em>Requires Boost.</em></p>
<p>Macros for looping over collections:</p>
<p>``` std::list&lt;std::string&gt; l;</p>
<p>foreach (std::string s, l) {} foreach (const std::string&amp; s, l) {}</p>
<p>std::map&lt;std::string, int&gt; m;</p>
<p>foreachpair (std::string s, int i, m) {} foreachpair (const std::string&amp; s, int i, m) {}</p>
<p>foreachkey (const std::string&amp; s, m) {} foreachvalue (int i, m) {} ```</p>
<h4><code>numify</code></h4>
<p><em>Requires Boost.</em></p>
<p>Wraps <code>boost::lexical_cast</code> for converting strings to numbers but returns a <code><a class="el" href="classTry.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">Try</a></code> rather than throwing exceptions.</p>
<p><a href="stringify"></a></p>
<h4><code>stringify</code></h4>
<p>Converts arbitrary types into strings by attempting to use an overloaded <code>std::ostream operator &lt;&lt;</code> (otherwise compilation fails). Note that <code>stringify</code> aborts the program if the stringification process fails.</p>
<h4><code><a class="el" href="structThreadLocal.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">ThreadLocal</a></code></h4>
<p><em>Requires pthreads.</em></p>
<p>You can give every thread it's own copy of some data using the <code><a class="el" href="structThreadLocal.html" title="Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in c...">ThreadLocal</a></code> abstraction:</p>
<p>``` ThreadLocal&lt;std::string&gt; local; local = new std::string("hello"); local-&gt;append(" world"); std::string* s = local; assert(*s == "hello world"); ```</p>
<p><a href="testing"></a></p>
<h2>Testing</h2>
<p>There are some macros provided for integration with gtest that make the tests less verbose while providing better messages when tests do fail:</p>
<p>``` Try&lt;int&gt; t = foo();</p>
<p>// Rather than: ASSERT(t.isSome()) &lt;&lt; "Error: " &lt;&lt; t.error();</p>
<p>// Just do: ASSERT_SOME(t); ```</p>
<p>There available macros include <code>ASSERT_SOME</code>, <code>EXPECT_SOME</code>, <code>ASSERT_NONE</code>, <code>EXPECT_NONE</code>, <code>ASSERT_ERROR</code>, <code>EXPECT_ERROR</code>, <code>ASSERT_SOME_EQ</code>, <code>EXPECT_SOME_EQ</code>, <code>ASSERT_SOME_TRUE</code>, <code>EXPECT_SOME_TRUE</code>, <code>ASSERT_SOME_FALSE</code>, <code>EXPECT_SOME_FALSE</code>.</p>
<p><a href="philosophy"></a></p>
<h2>Philosophy</h2>
<p>*"Premature optimization is the root of all evil."*</p>
<p>You'll notice that the library is designed in a way that can lead to a lot of copying. This decision was deliberate. Capturing the semantics of pointer ownership is hard to enforce programmatically unless you copy, and in many instances these copies can be elided by an optimizing compiler. We've choosen safety rather than premature optimizations.</p>
<p>Note, however, that we plan to liberally augment the library as we add C++11 support. In particular, we plan to use rvalue references and std::unique_ptr (although, likely wrapped as Owned) in order to explicitly express ownership semantics. Until then, it's unlikely that the performance overhead incurred via any extra copying is your bottleneck, and if it is we'd love to hear from you!</p>
<p><a href="exceptions"></a></p>
<h3>Exceptions</h3>
<p>The library WILL NEVER throw exceptions and will attempt to capture any exceptions thrown by underlying C++ functions and convert them into an <a href="#error">Error</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 7 2014 16:35:38 for mesos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>

<!DOCTYPE html>
<!--

		 ______                           __                
		/\  _  \                         /\ \               
		\ \ \L\ \  _____      __      ___\ \ \___      __   
		 \ \  __ \/\ '__`\  /'__`\   /'___\ \  _ `\  /'__`\ 
		  \ \ \/\ \ \ \L\ \/\ \L\.\_/\ \__/\ \ \ \ \/\  __/ 
		   \ \_\ \_\ \ ,__/\ \__/.\_\ \____\\ \_\ \_\ \____\
		    \/_/\/_/\ \ \/  \/__/\/_/\/____/ \/_/\/_/\/____/
		             \ \_\                                  
		              \/_/                                  
                                                    
		       /'\_/`\                                      
		      /\      \     __    ____    ___     ____      
		      \ \ \__\ \  /'__`\ /',__\  / __`\  /',__\     
		       \ \ \_/\ \/\  __//\__, `\/\ \L\ \/\__, `\    
		        \ \_\\ \_\ \____\/\____/\ \____/\/\____/    
		         \/_/ \/_/\/____/\/___/  \/___/  \/___/     

-->
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
		    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		    <meta name="description" content="">
		    <meta name="author" content="">

		    <!-- Le styles -->
				<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
		    
		    <link href="../../assets/css/main.css" media="screen" rel="stylesheet" type="text/css" />
				
				
			
			<!-- Google Analytics Magic -->
			<script type="text/javascript">
			  var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-20226872-1']);
			  _gaq.push(['_setDomainName', 'apache.org']);
			  _gaq.push(['_trackPageview']);

			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();
			</script>
    </head>
    <body>
			<!-- magical breadcrumbs -->
			<div class="topnav">
			<ul class="breadcrumb">
			  <li>
					<div class="dropdown">
					  <a data-toggle="dropdown" href="#">Apache Software Foundation <span class="caret"></span></a>
					  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
							<li><a href="http://www.apache.org">Apache Homepage</a></li>
							<li><a href="http://www.apache.org/licenses/">License</a></li>
					  	<li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>  
					  	<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
							<li><a href="http://www.apache.org/security/">Security</a></li>
					  </ul>
					</div>
				</li>
				<li><a href="http://mesos.apache.org">Apache Mesos</a></li>
				
				
					<li><a href="/documentation
/">Documentation
</a></li>
				
				
			</ul><!-- /breadcrumb -->
			</div>
			
			<!-- navbar excitement -->
	    <div class="navbar navbar-static-top" role="navigation">
	      <div class="navbar-inner">
	        <div class="container">
						<a href="/" class="logo"><img src="/assets/img/mesos_logo.png" alt="Apache Mesos logo" /></a>
					<div class="nav-collapse">
						<ul class="nav nav-pills navbar-right">
						  <li><a href="/gettingstarted/">Getting Started</a></li>
						  <li><a href="/documentation/latest/">Documentation</a></li>
						  <li><a href="/downloads/">Downloads</a></li>
						  <li><a href="/community/">Community</a></li>
						</ul>
					</div>
	        </div>
	      </div>
	    </div><!-- /.navbar -->

      <div class="container">

			<div class="row-fluid">
	<div class="col-md-4">
		<h4>If you're new to Mesos</h4>
		<p>See the <a href="/gettingstarted/">getting started</a> page for more information about downloading, building, and deploying Mesos.</p>
		
		<h4>If you'd like to get involved or you're looking for support</h4>
		<p>See our <a href="/community/">community</a> page for more details.</p>
	</div>
	<div class="col-md-8">
		<h1>Upgrading Mesos</h1>

<p>This document serves as a guide for users who wish to upgrade an existing mesos cluster. Some versions require particular upgrade techniques when upgrading a running cluster. Some upgrades will have incompatible changes.</p>

<h2>Upgrading from 0.18.0 to 0.19.0.</h2>

<p>NOTE: There are new required flags on the master (<code>--work_dir</code> and <code>--quorum</code>) to support the <em>Registrar</em> feature, which adds replicated state on the masters.</p>

<p>NOTE: No required upgrade ordering across components.</p>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new master binaries and restart the masters.</li>
<li>Install the new slave binaries and restart the slaves.</li>
<li>Upgrade the schedulers by linking the latest native library (mesos jar upgrade not necessary).</li>
<li>Restart the schedulers.</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
</ul>


<h2>Upgrading from 0.17.0 to 0.18.0.</h2>

<p>In order to upgrade a running cluster:</p>

<p>Note: This upgrade requires a system reboot for slaves that use Linux cgroups for isolation.</p>

<ul>
<li>Install the new master binaries and restart the masters.</li>
<li>Upgrade the schedulers by linking the latest native library and mesos jar (if necessary).</li>
<li>Restart the schedulers.</li>
<li>Install the new slave binaries then perform one of the following two steps, depending on if cgroups isolation is used:

<ul>
<li>[no cgroups]

<ul>
<li>Restart the slaves. The &ldquo;&ndash;isolation&rdquo; flag has changed and &ldquo;process&rdquo; has been deprecated in favor of &ldquo;posix/cpu,posix/mem&rdquo;.</li>
</ul>
</li>
<li>[cgroups]

<ul>
<li>Change from a single mountpoint for all controllers to separate mountpoints for each controller, e.g., /sys/fs/cgroup/memory/ and /sys/fs/cgroup/cpu/.</li>
<li>The suggested configuration is to mount a tmpfs filesystem to /sys/fs/cgroup and to let the slave mount the required controllers. However, the slave will also use previously mounted controllers if they are appropriately mounted under &ldquo;&ndash;cgroups_hierarchy&rdquo;.</li>
<li>It has been observed that unmounting and remounting of cgroups from the single to separate configuration is unreliable and a reboot into the new configuration is strongly advised. Restart the slaves after reboot.</li>
<li>The &ldquo;&ndash;cgroups_hierarchy&rdquo; now defaults to &ldquo;/sys/fs/cgroup&rdquo;. The &ldquo;&ndash;cgroups_root&rdquo; flag default remains &ldquo;mesos&rdquo;.</li>
<li> The &ldquo;&ndash;isolation&rdquo; flag has changed and &ldquo;cgroups&rdquo; has been deprecated in favor of &ldquo;cgroups/cpu,cgroups/mem&rdquo;.</li>
<li>The &ldquo;&ndash;cgroup_subsystems&rdquo; flag is no longer required and will be ignored.</li>
</ul>
</li>
</ul>
</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
</ul>


<h2>Upgrading from 0.16.0 to 0.17.0.</h2>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new master binaries and restart the masters.</li>
<li>Upgrade the schedulers by linking the latest native library and mesos jar (if necessary).</li>
<li>Restart the schedulers.</li>
<li>Install the new slave binaries and restart the slaves.</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
</ul>


<h2>Upgrading from 0.15.0 to 0.16.0.</h2>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new master binaries and restart the masters.</li>
<li>Upgrade the schedulers by linking the latest native library and mesos jar (if necessary).</li>
<li>Restart the schedulers.</li>
<li>Install the new slave binaries and restart the slaves.</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
</ul>


<h2>Upgrading from 0.14.0 to 0.15.0.</h2>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new master binaries.</li>
<li>Restart the masters with &ndash;credentials pointing to credentials of the framework(s).</li>
<li>NOTE: &ndash;authentication=false (default) allows both authenticated and unauthenticated frameworks to register.</li>
<li>Install the new slave binaries and restart the slaves.</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
<li>Upgrade the schedulers by linking the latest native library and mesos jar (if necessary).</li>
<li>NOTE: Schedulers should implement the new <code>reconcileTasks</code> driver method.</li>
<li>Schedulers should call the new <code>MesosSchedulerDriver</code> constructor that takes <code>Credential</code> to authenticate.</li>
<li>Restart the schedulers.</li>
<li>Restart the masters with &ndash;authentication=true.</li>
<li>NOTE: After the restart unauthenticated frameworks <em>will not</em> be allowed to register.</li>
</ul>


<h2>Upgrading from 0.13.0 to 0.14.0.</h2>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new master binaries and restart the masters.</li>
<li>NOTE: /vars endpoint has been removed.</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
<li>Install the new slave binaries.</li>
<li>Restart the slaves after adding &ndash;checkpoint flag to enable checkpointing.</li>
<li>NOTE: /vars endpoint has been removed.</li>
<li>Upgrade the schedulers by linking the latest native library and mesos jar (if necessary).</li>
<li>Set FrameworkInfo.checkpoint in the scheduler if checkpointing is desired (recommended).</li>
<li>Restart the schedulers.</li>
<li>Restart the masters (to get rid of the cached FrameworkInfo).</li>
<li>Restart the slaves (to get rid of the cached FrameworkInfo).</li>
</ul>


<h2>Upgrading from 0.12.0 to 0.13.0.</h2>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new master binaries and restart the masters.</li>
<li>Upgrade the schedulers by linking the latest native library and mesos jar (if necessary).</li>
<li>Restart the schedulers.</li>
<li>Install the new slave binaries.</li>
<li>NOTE: cgroups_hierarchy_root slave flag is renamed as cgroups_hierarchy</li>
<li>Restart the slaves.</li>
<li>Upgrade the executors by linking the latest native library and mesos jar (if necessary).</li>
</ul>


<h2>Upgrading from 0.11.0 to 0.12.0.</h2>

<p>In order to upgrade a running cluster:</p>

<ul>
<li>Install the new slave binaries and restart the slaves.</li>
<li>Install the new master binaries and restart the masters.</li>
</ul>


<p>If you are a framework developer, you will want to examine the new &lsquo;source&rsquo; field in the ExecutorInfo protobuf. This will allow you to take further advantage of the resource monitoring.</p>

	</div>
</div>

			
	      <hr>

				<!-- footer -->
	      <div class="footer">
	        <p>&copy; 2012-2014 <a href="http://apache.org">The Apache Software Foundation</a>.
	        Apache Mesos, the Apache feather logo, and the Apache Mesos project logo are trademarks of The Apache Software Foundation.<p>
	      </div><!-- /footer -->

	    </div> <!-- /container -->

	    <!-- JS -->
	    <script src="//code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
			<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js" type="text/javascript"></script>
    </body>
</html>